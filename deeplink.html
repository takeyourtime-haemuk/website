<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Opening Haemuk...</title>
</head>
<body>
  <p>Opening the Haemuk app...</p>
  <script>
    // Get the postId from the URL
    const path = window.location.pathname.split('/');
    const postId = path[path.length - 1];

    // Construct custom scheme
    const appUrl = `haemuk://post/${postId}`;

    // Fallback URLs
    const iosStore = 'https://apps.apple.com/app/id6747734534';
    const androidStore = 'https://play.google.com/store/apps/details?id=com.haemuk';

    // Detect platform
    const ua = navigator.userAgent || '';
    let fallback = androidStore; // default to Android store
    if (/iPhone|iPad|iPod/i.test(ua)) fallback = iosStore;

    // Try opening the app
    const now = Date.now();
    window.location = appUrl;

    // If the app didnâ€™t open in ~1.5s, redirect to store
    setTimeout(() => {
      if (Date.now() - now < 15000) {
        window.location = fallback;
      }
    }, 10000);
  </script>
</body>
</html>
